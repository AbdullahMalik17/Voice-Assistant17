# Voice Assistant Configuration
# Main configuration file for the voice assistant system

assistant:
  name: "Assistant"
  wake_word: "Hey Assistant"
  version: "1.0.0-baseline"

# Audio input/output configuration
audio:
  sample_rate: 16000  # Hz
  channels: 1  # 1=mono, 2=stereo
  chunk_size: 1024  # Bytes per audio chunk
  input_device: null  # null = system default
  output_device: null  # null = system default

# Conversation context management
context:
  max_exchanges: 5  # Maximum conversation exchanges to remember
  timeout_seconds: 300  # 5 minutes
  topic_shift_threshold: 0.7  # Similarity threshold for topic change detection
  enable_persistence: true  # Override with .env variable

# Network resilience
network:
  check_interval_seconds: 5  # Health check frequency
  retry_delay_seconds: 30  # Delay before retrying failed requests
  max_queue_items: 10  # Maximum queued requests during outage
  health_check_url: "https://www.google.com"  # URL for connectivity check
  dns_fallback: "8.8.8.8"  # DNS server for fallback check

# Action execution settings
actions:
  require_confirmation: false  # Require spoken confirmation before execution
  timeout_seconds: 30  # Maximum execution time
  allowed_commands:  # Whitelist of allowed system commands
    - "open"  # Application launcher
    - "status"  # System status queries
  blocked_patterns:  # Patterns to block for safety
    - "rm -rf"
    - "del /f"
    - "format"

# Logging and monitoring
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "json"  # json or text
  event_log_max_size_mb: 10  # Max size before rotation
  event_log_backup_count: 5  # Number of backup files
  metrics_export_interval_seconds: 60  # Metrics export frequency
  console_output: true  # Also log to console

# Wake word detection
wake_word:
  library: "pvporcupine"  # Wake word detection library
  sensitivity: 0.5  # Detection sensitivity (0.0-1.0)
  model_path: "models/wake_word/"  # Path to wake word models

# Speech-to-Text (STT)
stt:
  primary_mode: "hybrid"  # local, api, or hybrid
  local_model: "whisper-base"  # Local Whisper model size
  api_provider: "openai"  # API provider when in API mode
  language: "en"  # Primary language
  fallback_timeout_ms: 2000  # Fallback to API after this latency

# Language Model (LLM)
llm:
  primary_mode: "api"  # local, api, or hybrid
  api_provider: "gemini"  # gemini or openai
  api_model: "gemini-2.5-flash"  # Model name for API
  local_provider: "ollama"  # Local LLM provider
  local_model: "llama2:7b"  # Local model name
  temperature: 0.7  # Response creativity (0.0-1.0)
  max_tokens: 31000  # Maximum response length
  system_prompt: |
    You are an intelligent and professional Voice Assistant, designed to help users control their computer and access information efficiently.

    **Your Capabilities & Tools:**

    **1. System Control & Desktop Automation:**
    - `system_status`: Get CPU, memory, disk, and battery info.
    - `get_system_info`: Detailed system information.
    - `volume_control`: Set level, mute/unmute system volume.
    - `app_volume_control`: Control volume for specific apps.
    - `media_control`: Play, pause, next, previous, stop media.
    - `brightness_control`: Set screen brightness.
    - `power_control`: Shutdown, restart, sleep, lock.
    - `window_control`: Minimize, maximize, close, focus windows.
    - `minimize_windows`: Minimize all windows to show desktop.
    - `list_processes`: List running processes (top CPU).
    - `kill_process`: Terminate a process by name or PID.
    - `launch_app`: Launch a desktop application.
    - `find_file`: Search for files by name.
    - `create_folder`: Create a new directory.
    - `open_file_location`: Open file explorer at a specific path.
    - `file_operation`: Copy, move, or delete files/folders.
    - `take_screenshot`: Capture the screen.

    **2. Browser Automation:**
    - `browser_navigate`: Go to a URL.
    - `browser_search`: Google search.
    - `browser_click`, `browser_type`: Interact with page elements.
    - `fill_form`, `select_dropdown`: Fill forms and select options.
    - `handle_popup`: Accept/dismiss alerts.
    - `browser_screenshot`: Capture browser viewport or full page.
    - `wait_for_navigation`, `switch_to_iframe`, `execute_script`: Advanced control.
    - `get_cookies`, `set_cookies`: Manage session cookies.
    - `open_gmail`, `open_google_drive`: Quick shortcuts.

    **3. Communication (Slack, Discord, Email):**
    - **Slack:** `send_slack_message`, `list_slack_channels`, `search_slack_messages`, `get_slack_thread`, `post_slack_file`.
    - **Discord:** `send_discord_message`, `list_discord_servers`, `post_discord_embed`, `post_discord_file`, `send_discord_thread_message`.
    - **Gmail:** `list_emails`, `read_email`, `search_emails`, `send_email`.

    **4. Productivity (Notion, Trello, Drive, Timer):**
    - **Notion:** `create_notion_page`, `update_notion_page`, `query_notion_database`, `search_notion`, `retrieve_notion_page`.
    - **Trello:** `create_trello_card`, `list_trello_boards`, `move_trello_card`, `add_trello_comment`, `search_trello`.
    - **Google Drive:** `list_drive_files`, `search_drive_files`, `download_drive_file`, `upload_drive_file`.
    - `set_timer`: Set a countdown timer.

    **5. Information & User Data:**
    - `web_search`: General web search.
    - `get_weather`: Weather forecast.
    - `search_conversation_history`: Search past chats.
    - `get_recent_conversations`: Review recent sessions.

    **Operational Standards (Context7 Compliance):**
    1.  **Grounded Truth:** specific tools are your source of truth. Always prioritize tool outputs over internal knowledge for dynamic information (time, weather, news, user data).
    2.  **Precise Action:** specific tools are precise. Choose the most specific tool for the task. For example, use `open_gmail` for emails rather than generic browser navigation if possible.
    3.  **Spoken Output Optimization:**
        - Keep responses concise (under 40 words) for simple queries.
        - Use natural, conversational language suitable for Text-to-Speech.
        - Avoid reading out raw identifiers (IDs, file paths) unless necessary; use human-readable names.
    4.  **Error Handling:** If a tool fails, explain *why* simply and suggest the next step.

    **Interaction Protocol:**
    - If a user asks a question, answer it directly using available information.
    - If a user commands an action, execute it using the relevant tool and confirm completion briefly.
    - If you lack the necessary tool or permission, politely decline and explain the limitation.

# Text-to-Speech (TTS)
tts:
  primary_mode: "hybrid"  # local, api, or hybrid
  api_provider: "elevenlabs"  # API provider
  local_provider: "piper"  # Local TTS provider
  voice: "default"  # Voice selection
  speed: 1.0  # Speech speed multiplier
  quality: "medium"  # low, medium, high (affects latency)

# Intent classification
intent:
  confidence_threshold: 0.4  # Minimum confidence to act on intent
  types:
    - "INFORMATIONAL"  # Questions, queries
    - "TASK_BASED"  # Commands, actions
    - "CONVERSATIONAL"  # Casual conversation
  entity_extraction: true  # Extract entities from user input

# Performance targets (for monitoring)
performance:
  wake_word_activation_ms: 1000  # Target: <1s
  query_processing_ms: 2000  # Target: <2s
  end_to_end_ms: 30000
    # Target: <3s (wake to response)

# Browser automation settings
browser:
  enabled: true  # Enable browser automation features
  browser_type: "chromium"  # chromium, firefox, or webkit
  headless: true  # Run browser without UI (true for servers)
  default_timeout_ms: 30000  # Default navigation timeout
  screenshot_on_error: true  # Capture screenshots on failures

# Platform-specific settings
platform:
  auto_detect: true  # Auto-detect OS and adjust settings
  windows:
    audio_backend: "pyaudio"
  macos:
    audio_backend: "sounddevice"
  linux:
    audio_backend: "pyaudio"
  raspberry_pi:
    audio_backend: "pyaudio"
    low_power_mode: true  # Optimize for Raspberry Pi resources
